mixin wwaRequirements()
    - const resources = wwa.resources
    // wwa requirements
    link(rel="stylesheet" href=resources.wwaCss)
    - const audioJsFile = resources.audio.dir + (resources.audio.dir.endsWith("/") ? "" : "/" ) + resources.audio.js
    
    case mode
        when "production"
            script(src=audioJsFile)
            script(src=resources.wwaJs)
        when "development"
            script(src=resources.cryptoJsInDevMode)
            script(src=audioJsFile)
            script(src=resources.wwaJs)
    // /wwa requirements


mixin copyright(config)
    p
        | #{config.genre} &quot;
        a(href=config.product.href).wwa-copyright #{config.product.name}
        | &quot; &copy; #{config.startYear}-#{config.presentYear} #{config.credit}


doctype html
html(lang="ja")
    head
        meta(charset="UTF-8")
        title #{title}
        +wwaRequirements(wwa.resources)

    body
        #wrapper
            #wwa-wrapper.wwa-size-box(
                data-wwa-mapdata=wwa.mapdata,
                data-wwa-loader=wwa.loader
                data-wwa-audio-dir=wwa.resources.dir,
                data-wwa-urlgate-enable=wwa.urlgateEnable,
                data-wwa-title-img=wwa.titleImg
            )
    
        if copyright
            footer#copyright
                +copyright(copyright.wwa)
                +copyright(copyright.wing)
